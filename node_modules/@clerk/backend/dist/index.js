"use strict";var Lt=Object.create;var le=Object.defineProperty;var Dt=Object.getOwnPropertyDescriptor;var Ft=Object.getOwnPropertyNames;var Vt=Object.getPrototypeOf,$t=Object.prototype.hasOwnProperty;var Ht=(t,e)=>{for(var r in e)le(t,r,{get:e[r],enumerable:!0})},at=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ft(e))!$t.call(t,i)&&i!==r&&le(t,i,{get:()=>e[i],enumerable:!(n=Dt(e,i))||n.enumerable});return t};var ue=(t,e,r)=>(r=t!=null?Lt(Vt(t)):{},at(e||!t||!t.__esModule?le(r,"default",{value:t,enumerable:!0}):r,t)),Bt=t=>at(le({},"__esModule",{value:!0}),t);var Nr={};Ht(Nr,{AllowlistIdentifier:()=>j,AuthStatus:()=>Ge,Clerk:()=>Rr,Client:()=>L,DeletedObject:()=>D,Email:()=>F,EmailAddress:()=>E,ExternalAccount:()=>V,IdentificationLink:()=>v,Invitation:()=>$,OauthAccessToken:()=>H,ObjectType:()=>je,Organization:()=>U,OrganizationInvitation:()=>B,OrganizationMembership:()=>G,OrganizationMembershipPublicUserData:()=>te,PhoneNumber:()=>q,RedirectUrl:()=>Y,SMSMessage:()=>Q,Session:()=>C,SignInToken:()=>X,Token:()=>Z,User:()=>ee,Verification:()=>P,constants:()=>ct,createAuthenticateRequest:()=>st,debugRequestState:()=>Ee,decodeJwt:()=>Ne,deserialize:()=>De,hasValidSignature:()=>At,loadInterstitialFromLocal:()=>Je,makeAuthObjectSerializable:()=>dr,prunePrivateMetadata:()=>Ve,sanitizeAuthObject:()=>ur,signedInAuthObject:()=>$e,signedOutAuthObject:()=>He,verifyJwt:()=>tt,verifyToken:()=>nt});module.exports=Bt(Nr);var p=class{constructor(e){this.request=e}requireId(e){if(!e)throw new Error("A valid resource ID is required.")}};var ze="/",Gt=new RegExp(ze+"{1,}","g");function o(...t){return t.filter(e=>e).join(ze).replace(Gt,ze)}var Ke="/allowlist_identifiers",de=class extends p{async getAllowlistIdentifierList(){return this.request({method:"GET",path:Ke})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:Ke,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:o(Ke,e)})}};var Me="/clients",ce=class extends p{async getClientList(){return this.request({method:"GET",path:Me})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:o(Me,e)})}verifyClient(e){return this.request({method:"POST",path:o(Me,"verify"),bodyParams:{token:e}})}};var pe="/email_addresses",me=class extends p{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:o(pe,e)})}async createEmailAddress(e){return this.request({method:"POST",path:pe,bodyParams:e})}async updateEmailAddress(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:o(pe,e),bodyParams:r})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:o(pe,e)})}};var Yt="/emails",ge=class extends p{async createEmail(e){return this.request({method:"POST",path:Yt,bodyParams:e})}};var fe=class extends p{async getInterstitial(){return this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}};var We="/invitations",ye=class extends p{async getInvitationList(){return this.request({method:"GET",path:We})}async createInvitation(e){return this.request({method:"POST",path:We,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:o(We,e,"revoke")})}};var w="/organizations",he=class extends p{async getOrganizationList(e){return this.request({method:"GET",path:w,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:w,bodyParams:e})}async getOrganization(e){let r="organizationId"in e?e.organizationId:e.slug;return this.requireId(r),this.request({method:"GET",path:o(w,r)})}async updateOrganization(e,r){return this.requireId(e),this.request({method:"PATCH",path:o(w,e),bodyParams:r})}async updateOrganizationMetadata(e,r){return this.requireId(e),this.request({method:"PATCH",path:o(w,e,"metadata"),bodyParams:r})}async deleteOrganization(e){return this.request({method:"DELETE",path:o(w,e)})}async getOrganizationMembershipList(e){let{organizationId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:o(w,r,"memberships"),queryParams:{limit:n,offset:i}})}async createOrganizationMembership(e){let{organizationId:r,userId:n,role:i}=e;return this.requireId(r),this.request({method:"POST",path:o(w,r,"memberships"),bodyParams:{userId:n,role:i}})}async updateOrganizationMembership(e){let{organizationId:r,userId:n,role:i}=e;return this.requireId(r),this.request({method:"PATCH",path:o(w,r,"memberships",n),bodyParams:{role:i}})}async updateOrganizationMembershipMetadata(e){let{organizationId:r,userId:n,publicMetadata:i,privateMetadata:s}=e;return this.request({method:"PATCH",path:o(w,r,"memberships",n,"metadata"),bodyParams:{publicMetadata:i,privateMetadata:s}})}async deleteOrganizationMembership(e){let{organizationId:r,userId:n}=e;return this.requireId(r),this.request({method:"DELETE",path:o(w,r,"memberships",n)})}async getPendingOrganizationInvitationList(e){let{organizationId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:o(w,r,"invitations","pending"),queryParams:{limit:n,offset:i}})}async createOrganizationInvitation(e){let{organizationId:r,...n}=e;return this.requireId(r),this.request({method:"POST",path:o(w,r,"invitations"),bodyParams:{...n}})}async revokeOrganizationInvitation(e){let{organizationId:r,invitationId:n,requestingUserId:i}=e;return this.requireId(r),this.request({method:"POST",path:o(w,r,"invitations",n,"revoke"),bodyParams:{requestingUserId:i}})}};var be="/phone_numbers",Se=class extends p{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:o(be,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:be,bodyParams:e})}async updatePhoneNumber(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:o(be,e),bodyParams:r})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:o(be,e)})}};var Oe="/redirect_urls",ke=class extends p{async getRedirectUrlList(){return this.request({method:"GET",path:Oe})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:o(Oe,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:Oe,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:o(Oe,e)})}};var se="/sessions",_e=class extends p{constructor(){super(...arguments);this.getSessionList=async r=>this.request({method:"GET",path:se,queryParams:r});this.getSession=async r=>(this.requireId(r),this.request({method:"GET",path:o(se,r)}));this.revokeSession=async r=>(this.requireId(r),this.request({method:"POST",path:o(se,r,"revoke")}));this.verifySession=async(r,n)=>(this.requireId(r),this.request({method:"POST",path:o(se,r,"verify"),bodyParams:{token:n}}));this.getToken=async(r,n)=>(this.requireId(r),(await this.request({method:"POST",path:o(se,r,"tokens",n||"")})).jwt)}};var lt="/sign_in_tokens",Ie=class extends p{async createSignInToken(e){return this.request({method:"POST",path:lt,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:o(lt,e,"revoke")})}};var Xt="/sms_messages",Ae=class extends p{async createSMSMessage(e){return this.request({method:"POST",path:Xt,bodyParams:e})}};var J="/users",we=class extends p{async getUserList(e={}){return this.request({method:"GET",path:J,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:o(J,e)})}async createUser(e){return this.request({method:"POST",path:J,bodyParams:e})}async updateUser(e,r={}){return this.requireId(e),this.request({method:"PATCH",path:o(J,e),bodyParams:r})}async updateUserMetadata(e,r){return this.requireId(e),this.request({method:"PATCH",path:o(J,e,"metadata"),bodyParams:r})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:o(J,e)})}async getCount(e={}){return this.request({method:"GET",path:o(J,"count"),queryParams:e})}async getUserOauthAccessToken(e,r){return this.requireId(e),this.request({method:"GET",path:o(J,e,"oauth_access_tokens",r)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:o(J,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:r,limit:n,offset:i}=e;return this.requireId(r),this.request({method:"GET",path:o(J,r,"organization_memberships"),queryParams:{limit:n,offset:i}})}async verifyPassword(e){let{userId:r,password:n}=e;return this.requireId(r),this.request({method:"POST",path:o(J,r,"verify_password"),bodyParams:{password:n}})}async verifyTOTP(e){let{userId:r,code:n}=e;return this.requireId(r),this.request({method:"POST",path:o(J,r,"verify_totp"),bodyParams:{code:n}})}};var gt=ue(require("deepmerge")),Fe=ue(require("snakecase-keys"));var K="https://api.clerk.dev",R="v1",ut="@clerk/backend";var Qt={AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Zt={Session:"__session",ClientUat:"__client_uat"},dt={AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},er={AuthStatus:dt.AuthStatus},tr={Json:"application/json"},ct={Attributes:Qt,Cookies:Zt,Headers:dt,SearchParams:er,ContentTypes:tr};var pt=ue(require("#crypto")),mt=ue(require("#fetch")),rr=mt.default.bind(globalThis),nr={crypto:pt.default,fetch:rr},N=nr;var j=class{constructor(e,r,n,i,s){this.id=e;this.identifier=r;this.createdAt=n;this.updatedAt=i;this.invitationId=s}static fromJSON(e){return new j(e.id,e.identifier,e.created_at,e.updated_at,e.invitation_id)}};var C=class{constructor(e,r,n,i,s,a,l,u,m){this.id=e;this.clientId=r;this.userId=n;this.status=i;this.lastActiveAt=s;this.expireAt=a;this.abandonAt=l;this.createdAt=u;this.updatedAt=m}static fromJSON(e){return new C(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at)}};var L=class{constructor(e,r,n,i,s,a,l,u){this.id=e;this.sessionIds=r;this.sessions=n;this.signInId=i;this.signUpId=s;this.lastActiveSessionId=a;this.createdAt=l;this.updatedAt=u}static fromJSON(e){return new L(e.id,e.session_ids,e.sessions.map(r=>C.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}};var D=class{constructor(e,r,n,i){this.object=e;this.id=r;this.slug=n;this.deleted=i}static fromJSON(e){return new D(e.object,e.id||null,e.slug||null,e.deleted)}};var F=class{constructor(e,r,n,i,s,a,l){this.id=e;this.fromEmailName=r;this.emailAddressId=n;this.toEmailAddress=i;this.subject=s;this.body=a;this.status=l}static fromJSON(e){return new F(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.status)}};var v=class{constructor(e,r){this.id=e;this.type=r}static fromJSON(e){return new v(e.id,e.type)}};var P=class{constructor(e,r,n=null,i=null,s=null,a=null){this.status=e;this.strategy=r;this.externalVerificationRedirectURL=n;this.attempts=i;this.expireAt=s;this.nonce=a}static fromJSON(e){return new P(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}};var E=class{constructor(e,r,n,i){this.id=e;this.emailAddress=r;this.verification=n;this.linkedTo=i}static fromJSON(e){return new E(e.id,e.email_address,e.verification&&P.fromJSON(e.verification),e.linked_to.map(r=>v.fromJSON(r)))}};var V=class{constructor(e,r,n,i,s,a,l,u,m,y,h={},b,g){this.id=e;this.provider=r;this.identificationId=n;this.externalId=i;this.approvedScopes=s;this.emailAddress=a;this.firstName=l;this.lastName=u;this.picture=m;this.username=y;this.publicMetadata=h;this.label=b;this.verification=g}static fromJSON(e){return new V(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.avatar_url,e.username,e.public_metadata,e.label,e.verification&&P.fromJSON(e.verification))}};var $=class{constructor(e,r,n,i,s,a){this.id=e;this.emailAddress=r;this.publicMetadata=n;this.createdAt=i;this.updatedAt=s;this.revoked=a}static fromJSON(e){return new $(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.revoked)}};var je=(c=>(c.AllowlistIdentifier="allowlist_identifier",c.Client="client",c.Email="email",c.EmailAddress="email_address",c.ExternalAccount="external_account",c.FacebookAccount="facebook_account",c.GoogleAccount="google_account",c.Invitation="invitation",c.OauthAccessToken="oauth_access_token",c.Organization="organization",c.OrganizationInvitation="organization_invitation",c.OrganizationMembership="organization_membership",c.PhoneNumber="phone_number",c.RedirectUrl="redirect_url",c.Session="session",c.SignInAttempt="sign_in_attempt",c.SignInToken="sign_in_token",c.SignUpAttempt="sign_up_attempt",c.SmsMessage="sms_message",c.User="user",c.Web3Wallet="web3_wallet",c.Token="token",c.TotalCount="total_count",c))(je||{});var H=class{constructor(e,r,n={},i,s,a){this.provider=e;this.token=r;this.publicMetadata=n;this.label=i;this.scopes=s;this.tokenSecret=a}static fromJSON(e){return new H(e.provider,e.token,e.public_metadata,e.label,e.scopes,e.token_secret)}};var U=class{constructor(e,r,n,i,s,a,l={},u={}){this.id=e;this.name=r;this.slug=n;this.logoUrl=i;this.createdAt=s;this.updatedAt=a;this.publicMetadata=l;this.privateMetadata=u}static fromJSON(e){return new U(e.id,e.name,e.slug,e.logo_url,e.created_at,e.updated_at,e.public_metadata,e.private_metadata)}};var B=class{constructor(e,r,n,i,s,a,l){this.id=e;this.emailAddress=r;this.role=n;this.organizationId=i;this.createdAt=s;this.updatedAt=a;this.status=l}static fromJSON(e){return new B(e.id,e.email_address,e.role,e.organization_id,e.created_at,e.updated_at,e.status)}};var G=class{constructor(e,r,n={},i={},s,a,l,u){this.id=e;this.role=r;this.publicMetadata=n;this.privateMetadata=i;this.createdAt=s;this.updatedAt=a;this.organization=l;this.publicUserData=u}static fromJSON(e){return new G(e.id,e.role,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,U.fromJSON(e.organization),te.fromJSON(e.public_user_data))}},te=class{constructor(e,r,n,i,s){this.identifier=e;this.firstName=r;this.lastName=n;this.profileImageUrl=i;this.userId=s}static fromJSON(e){return new te(e.identifier,e.first_name,e.last_name,e.profile_image_url,e.user_id)}};var q=class{constructor(e,r,n,i,s,a){this.id=e;this.phoneNumber=r;this.reservedForSecondFactor=n;this.defaultSecondFactor=i;this.verification=s;this.linkedTo=a}static fromJSON(e){return new q(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&P.fromJSON(e.verification),e.linked_to.map(r=>v.fromJSON(r)))}};var Y=class{constructor(e,r,n,i){this.id=e;this.url=r;this.createdAt=n;this.updatedAt=i}static fromJSON(e){return new Y(e.id,e.url,e.created_at,e.updated_at)}};var X=class{constructor(e,r,n,i,s,a){this.id=e;this.userId=r;this.token=n;this.status=i;this.createdAt=s;this.updatedAt=a}static fromJSON(e){return new X(e.id,e.user_id,e.token,e.status,e.created_at,e.updated_at)}};var Q=class{constructor(e,r,n,i,s,a){this.id=e;this.fromPhoneNumber=r;this.toPhoneNumber=n;this.message=i;this.status=s;this.phoneNumberId=a}static fromJSON(e){return new Q(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id)}};var Z=class{constructor(e){this.jwt=e}static fromJSON(e){return new Z(e.jwt)}};var re=class{constructor(e,r,n){this.id=e;this.web3Wallet=r;this.verification=n}static fromJSON(e){return new re(e.id,e.web3_wallet,e.verification&&P.fromJSON(e.verification))}};var ee=class{constructor(e,r,n,i,s,a,l,u,m,y,h,b,g,S,x,T,_,O,I,A={},k={},f={},c=[],W=[],Ue=[],qe=[]){this.id=e;this.passwordEnabled=r;this.totpEnabled=n;this.backupCodeEnabled=i;this.twoFactorEnabled=s;this.banned=a;this.createdAt=l;this.updatedAt=u;this.profileImageUrl=m;this.gender=y;this.birthday=h;this.primaryEmailAddressId=b;this.primaryPhoneNumberId=g;this.primaryWeb3WalletId=S;this.lastSignInAt=x;this.externalId=T;this.username=_;this.firstName=O;this.lastName=I;this.publicMetadata=A;this.privateMetadata=k;this.unsafeMetadata=f;this.emailAddresses=c;this.phoneNumbers=W;this.web3Wallets=Ue;this.externalAccounts=qe}static fromJSON(e){return new ee(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.created_at,e.updated_at,e.profile_image_url,e.gender,e.birthday,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(r=>E.fromJSON(r)),(e.phone_numbers||[]).map(r=>q.fromJSON(r)),(e.web3_wallets||[]).map(r=>re.fromJSON(r)),(e.external_accounts||[]).map(r=>V.fromJSON(r)))}};function De(t){return Array.isArray(t)?t.map(e=>Le(e)):ir(t)?t.data.map(e=>Le(e)):Le(t)}function ir(t){return t.data!==void 0}function sr(t){return t.total_count}function Le(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return D.fromJSON(t);switch(t.object){case"allowlist_identifier":return j.fromJSON(t);case"client":return L.fromJSON(t);case"email_address":return E.fromJSON(t);case"email":return F.fromJSON(t);case"invitation":return $.fromJSON(t);case"oauth_access_token":return H.fromJSON(t);case"organization":return U.fromJSON(t);case"organization_invitation":return B.fromJSON(t);case"organization_membership":return G.fromJSON(t);case"phone_number":return q.fromJSON(t);case"redirect_url":return Y.fromJSON(t);case"sign_in_token":return X.fromJSON(t);case"session":return C.fromJSON(t);case"sms_message":return Q.fromJSON(t);case"token":return Z.fromJSON(t);case"total_count":return sr(t);case"user":return ee.fromJSON(t);default:return t}}var or=t=>async(...e)=>{let{data:r,errors:n,status:i,statusText:s}=await t(...e);if(n===null)return r;throw new oe(s||"",{data:n,status:i||""})};function ft(t){return or(async r=>{let{apiKey:n,secretKey:i,apiUrl:s=K,apiVersion:a=R,userAgent:l=ut,httpOptions:u={}}=t,{path:m,method:y,queryParams:h,headerParams:b,bodyParams:g}=r,S=i||n;if(!S)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.dev and get your key for your instance.");let x=o(s,a,m),T=new URL(x);if(h){let k=(0,Fe.default)({...h});for(let[f,c]of Object.entries(k))c&&[c].flat().forEach(W=>T.searchParams.append(f,W))}let _={Authorization:`Bearer ${S}`,"Content-Type":"application/json","Clerk-Backend-SDK":l,...b},I=y!=="GET"&&g&&Object.keys(g).length>0?{body:JSON.stringify((0,Fe.default)(g,{deep:!1}))}:null,A;try{A=await N.fetch(T.href,(0,gt.default)(u,{method:y,headers:_,...I}));let f=await(_&&_["Content-Type"]==="application/json"?A.json():A.text());if(!A.ok)throw f;return{data:De(f),errors:null}}catch(k){return k instanceof Error?{data:null,errors:[{code:"unexpected_error",message:k.message||"Unexpected error"}]}:{data:null,errors:ar(k),status:A?.status,statusText:A?.statusText}}})}function ar(t){if(!!t&&typeof t=="object"&&"errors"in t){let e=t.errors;return e.length>0?e.map(lr):[]}return[]}function lr(t){return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t?.meta?.param_name,sessionId:t?.meta?.session_id}}}var oe=class extends Error{constructor(r,{data:n,status:i}){super(r);Object.setPrototypeOf(this,oe.prototype),this.clerkError=!0,this.message=r,this.status=i,this.errors=n}};function ne(t){let e=ft(t);return{allowlistIdentifiers:new de(e),clients:new ce(e),emailAddresses:new me(e),emails:new ge(e),interstitial:new fe(e),invitations:new ye(e),organizations:new he(e),phoneNumbers:new Se(e),redirectUrls:new ke(e),sessions:new _e(e),signInTokens:new Ie(e),smsMessages:new Ae(e),users:new we(e)}}var yt=t=>()=>{let e={...t};return e.apiKey=(e.apiKey||"").substring(0,7),e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}};function $e(t,e,r){let{act:n,sid:i,org_id:s,org_role:a,org_slug:l,sub:u}=t,{apiKey:m,secretKey:y,apiUrl:h,apiVersion:b,token:g,session:S,user:x,organization:T}=e,{sessions:_}=ne({apiKey:m,secretKey:y,apiUrl:h,apiVersion:b}),O=cr({sessionId:i,sessionToken:g,fetcher:(...I)=>_.getToken(...I)});return{actor:n,sessionClaims:t,sessionId:i,session:S,userId:u,user:x,orgId:s,orgRole:a,orgSlug:l,organization:T,getToken:O,debug:yt({...e,...r})}}function He(t){return{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,organization:null,getToken:()=>Promise.resolve(null),debug:yt(t)}}function Ve(t){return t&&(delete t.privateMetadata,delete t.private_metadata),t}function ur(t){let e=t.user?{...t.user}:t.user,r=t.organization?{...t.organization}:t.organization;return Ve(e),Ve(r),{...t,user:e,organization:r}}var dr=t=>{let{debug:e,getToken:r,...n}=t;return n},cr=t=>{let{fetcher:e,sessionToken:r,sessionId:n}=t||{};return async(i={})=>n?i.template?e(n,i.template):r:null};function pr(t){return new Promise(e=>setTimeout(e,t))}var mr=5;async function ae(t,e=1,r=mr){try{return await t()}catch(n){if(e>=r)throw n;return await pr(2**e*100),ae(t,e+1)}}function Pe(t){return t.startsWith("test_")||t.startsWith("sk_test_")}function ht(t){return t.startsWith("live_")||t.startsWith("sk_live_")}function bt(t){return t.endsWith(".lclstage.dev")||t.endsWith(".stgstage.dev")||t.endsWith(".clerkstage.dev")||t.endsWith(".accountsstage.dev")}var St="pk_live_",gr="pk_test_";function ie(t){if(t=t||"",!fr(t))return null;let e=t.startsWith(St)?"production":"development",r=Ot(t.split("_")[2]);return r.endsWith("$")?(r=r.slice(0,-1),{instanceType:e,frontendApi:r}):null}function fr(t){t=t||"";let e=t.startsWith(St)||t.startsWith(gr),r=Ot(t.split("_")[2]||"").endsWith("$");return e&&r}var Ot=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof Buffer<"u"?new Buffer(t,"base64").toString():t;var d=class extends Error{constructor({action:r,message:n,reason:i}){super(n);Object.setPrototypeOf(this,d.prototype),this.reason=i,this.message=n,this.action=r}getFullMessage(){return`${[this.message,this.action].filter(r=>r).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function Je(t){t.frontendApi=ie(t.publishableKey)?.frontendApi||t.frontendApi||"";let{debugData:e,frontendApi:r,pkgVersion:n,publishableKey:i,proxyUrl:s,isSatellite:a=!1,domain:l}=t;return`
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${r}';
            window.__clerk_debug = ${JSON.stringify(e||{})};
            ${s?`window.__clerk_proxy_url = '${s}'`:""}
            ${l?`window.__clerk_domain = '${l}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${a}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${i?`script.setAttribute('data-clerk-publishable-key', '${i}');`:`script.setAttribute('data-clerk-frontend-api', '${r}');`}

                ${l?`script.setAttribute('data-clerk-domain', '${l}');`:""}
                ${s?`script.setAttribute('data-clerk-proxy-url', '${s}')`:""};
                script.async = true;
                script.src = '${yr(s||r,n)}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        <\/script>
    </body>
`}async function kt(t){t.frontendApi=ie(t.publishableKey)?.frontendApi||t.frontendApi||"";let e=xe(t),r=await ae(()=>N.fetch(xe(t)));if(!r.ok)throw new d({action:"Contact support@clerk.dev",message:`Error loading Clerk Interstitial from ${e} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function xe(t){t.frontendApi=ie(t.publishableKey)?.frontendApi||t.frontendApi||"";let{apiUrl:e,frontendApi:r,pkgVersion:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:l}=t,u=new URL(e);return u.pathname=o(u.pathname,R,"/public/interstitial"),u.searchParams.append("clerk_js_version",_t(r,n)),i?u.searchParams.append("publishable_key",i):u.searchParams.append("frontend_api",r),s&&u.searchParams.append("proxy_url",s),a&&u.searchParams.append("is_satellite","true"),l&&u.searchParams.append("domain",l),u.href}var _t=(t,e)=>!e&&bt(t)?"staging":e?e.includes("next")?"next":e.split(".")[0]||"latest":"latest",yr=(t,e)=>{let r=t.replace(/http(s)?:\/\//,""),n=_t(t,e);return`https://${r}/npm/@clerk/clerk-js@${n}/dist/clerk.browser.js`};var Ge=(i=>(i.SignedIn="signed-in",i.SignedOut="signed-out",i.Interstitial="interstitial",i.Unknown="unknown",i))(Ge||{});async function Ye(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,cookieToken:a,frontendApi:l,proxyUrl:u,publishableKey:m,domain:y,isSatellite:h,headerToken:b,loadSession:g,loadUser:S,loadOrganization:x}=t,{sid:T,org_id:_,sub:O}=e,{sessions:I,users:A,organizations:k}=ne({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s}),[f,c,W]=await Promise.all([g?I.getSession(T):Promise.resolve(void 0),S?A.getUser(O):Promise.resolve(void 0),x&&_?k.getOrganization({organizationId:_}):Promise.resolve(void 0)]),jt=$e(e,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:s,token:a||b||"",session:f,user:c,organization:W},{...t,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:l,proxyUrl:u,publishableKey:m,domain:y,isSatellite:h,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>jt}}function z(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:l}=t;return{status:"signed-out",reason:e,message:r,frontendApi:n,proxyUrl:s,publishableKey:i,isSatellite:a,domain:l,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>He({...t,status:"signed-out",reason:e,message:r})}}function M(t,e,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:l}=t;return{status:"interstitial",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:a,domain:l,proxyUrl:s,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null}}function It(t,e,r=""){let{frontendApi:n,publishableKey:i,isSatellite:s,domain:a}=t;return{status:"unknown",reason:e,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:a,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null}}function Xe({originURL:t,host:e,forwardedHost:r,forwardedPort:n,forwardedProto:i}){if(i&&i!==t.protocol)return!0;let s=hr(r||e);return s.port=n||s.port,s.port!==t.port||s.hostname!==t.hostname}function hr(t){return new URL(`https://${t}`)}var Re=require("rfc4648");var br=2*1e3,et={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512",ES256:"SHA-256",ES384:"SHA-384",ES512:"SHA-512"},Qe="RSASSA-PKCS1-v1_5",Ze="ECDSA",Sr={RS256:Qe,RS384:Qe,RS512:Qe,ES256:Ze,ES384:Ze,ES512:Ze},Or=Object.keys(et);async function At(t,e){let{header:r,signature:n,raw:i}=t,a=new TextEncoder().encode([i.header,i.payload].join(".")),l=await N.crypto.subtle.importKey("jwk",e,{name:Sr[r.alg],hash:et[r.alg]},!1,["verify"]);return N.crypto.subtle.verify("RSASSA-PKCS1-v1_5",l,n,a)}function Ne(t){let e=(t||"").toString().split(".");if(e.length!==3)throw new d({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,n,i]=e,s=new TextDecoder,a=JSON.parse(s.decode(Re.base64url.parse(r,{loose:!0}))),l=JSON.parse(s.decode(Re.base64url.parse(n,{loose:!0}))),u=Re.base64url.parse(i,{loose:!0});return{header:a,payload:l,signature:u,raw:{header:r,payload:n,signature:i,text:t}}}async function tt(t,{audience:e,authorizedParties:r,clockSkewInSeconds:n=br,issuer:i,key:s}){let a=Ne(t),{header:l,payload:u}=a,{typ:m,alg:y}=l;if(typeof m<"u"&&m!=="JWT")throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(m)}. Expected "JWT".`});if(!et[y])throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(y)}. Supported: ${Or}.`});let{azp:h,sub:b,aud:g,iss:S,iat:x,exp:T,nbf:_}=u;if(typeof b!="string")throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(b)}.`});if(typeof g=="string"){if(g!==e)throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(g)}. Expected "${e}".`})}else if(Array.isArray(g)&&g.length>0&&g.every(f=>typeof f=="string")&&!g.includes(e))throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(g)}. Does not include "${e}".`});if(h&&r&&r.length>0&&!r.includes(h))throw new d({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(h)}. Expected "${r}".`});if(typeof i=="function"&&!i(S))throw new d({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if(typeof i=="string"&&S&&S!==i)throw new d({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(a.payload.iss)}. Expected "${i}".`});if(typeof T!="number")throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(T)}. Expected number.`});let O=new Date(Date.now()),I=new Date(0);if(I.setUTCSeconds(T),I.getTime()<=O.getTime()-n)throw new d({reason:"token-expired",message:`JWT is expired. Expiry date: ${I}, Current date: ${O}.`});if(_!==void 0){if(typeof _!="number")throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(_)}. Expected number.`});let f=new Date(0);if(f.setUTCSeconds(_),f.getTime()>O.getTime()+n)throw new d({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${f}; Current date: ${O};`})}if(x!==void 0){if(typeof x!="number")throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(x)}. Expected number.`});let f=new Date(0);if(f.setUTCSeconds(x),f.getTime()>O.getTime()+n)throw new d({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${f}; Current date: ${O};`})}let k;try{k=await At(a,s)}catch(f){throw new d({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${f}`})}if(!k)throw new d({reason:"token-invalid-signature",message:"JWT signature is invalid."});return u}var Ce={},Pt=0;function ve(t){return Ce[t]}function xt(t,e=1e3*60*60){Ce[t.kid]=t,Pt=Date.now(),e>=0&&setTimeout(()=>{t?delete Ce[t.kid]:Ce={}},e)}var wt="local",_r="-----BEGIN PUBLIC KEY-----",Ir="-----END PUBLIC KEY-----",Ar="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",wr="IDAQAB";function Tt(t){if(!ve(wt)){if(!t)throw new d({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let e=t.replace(/(\r\n|\n|\r)/gm,"").replace(_r,"").replace(Ir,"").replace(Ar,"").replace(wr,"").replace(/\+/g,"-").replace(/\//g,"_");xt({kid:"local",kty:"RSA",alg:"RS256",n:e,e:"AQAB"},-1)}return ve(wt)}async function rt({apiKey:t,secretKey:e,apiUrl:r=K,apiVersion:n=R,issuer:i,kid:s,jwksCacheTtlInMs:a=1e3*60*60,skipJwksCache:l}){let u=!ve(s)&&Tr();if(l||u){let y,h=e||t;if(h)y=()=>xr(r,h,n);else if(i)y=()=>Pr(i);else throw new d({action:"Contact support@clerk.dev",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:b}=await ae(y);if(!b||!b.length)throw new d({action:"Contact support@clerk.dev",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.dev.",reason:"jwk-remote-failed-to-load"});b.forEach(g=>xt(g,a))}let m=ve(s);if(!m)throw new d({action:"Contact support@clerk.dev",message:`Unable to find a signing key in JWKS that matches kid='${s}'.`,reason:"jwk-remote-missing"});return m}async function Pr(t){let e=new URL(t);e.pathname=o(e.pathname,".well-known/jwks.json");let r=await N.fetch(e.href);if(!r.ok)throw new d({action:"Contact support@clerk.dev",message:`Error loading Clerk JWKS from ${e.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function xr(t,e,r){if(!e)throw new d({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.dev and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(t);n.pathname=o(n.pathname,r,"/jwks");let i=await N.fetch(n.href,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw new d({action:"Contact support@clerk.dev",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"});return i.json()}function Tr(){return Date.now()-Pt>=300*1e3}async function nt(t,e){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,authorizedParties:a,clockSkewInSeconds:l,issuer:u,jwksCacheTtlInMs:m,jwtKey:y,skipJwksCache:h}=e,{header:b}=Ne(t),{kid:g}=b,S;if(y)S=Tt(y);else if(typeof u=="string")S=await rt({issuer:u,kid:g,jwksCacheTtlInMs:m,skipJwksCache:h});else if(r||n)S=await rt({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,kid:g,jwksCacheTtlInMs:m,skipJwksCache:h});else throw new d({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await tt(t,{authorizedParties:a,clockSkewInSeconds:l,key:S,issuer:u})}var Jt=t=>{let{apiKey:e,secretKey:r,userAgent:n}=t;if(Pe(r||e)&&!n?.startsWith("Mozilla/"))return z(t,"header-missing-non-browser")},Rt=t=>{let{origin:e,host:r,forwardedHost:n,forwardedPort:i,forwardedProto:s}=t;if(e&&Xe({originURL:new URL(e),host:r,forwardedHost:n,forwardedPort:i,forwardedProto:s}))return z(t,"header-missing-cors")},Nt=t=>{let{apiKey:e,secretKey:r,clientUat:n}=t;if(Pe(r||e)&&!n)return M(t,"uat-missing")},Ct=t=>{let{apiKey:e,secretKey:r,referrer:n,host:i,forwardedHost:s,forwardedPort:a,forwardedProto:l}=t,u=n&&Xe({originURL:new URL(n),host:i,forwardedHost:s,forwardedPort:a,forwardedProto:l});if(Pe(r||e)&&u)return M(t,"cross-origin-referrer")},vt=t=>{let{apiKey:e,secretKey:r,clientUat:n,cookieToken:i}=t;if(ht(r||e)&&!n&&!i)return z(t,"cookie-and-uat-missing")},Et=t=>{let{clientUat:e}=t;if(e==="0")return z(t,"standard-signed-out")},Ut=t=>{let{clientUat:e,cookieToken:r}=t;if(e&&Number.parseInt(e)>0&&!r)return M(t,"cookie-missing")},qt=async t=>{let{headerToken:e}=t,r=await Kt(t,e);return await Ye(t,r)},zt=async t=>{let{cookieToken:e,clientUat:r}=t,n=await Kt(t,e),i=await Ye(t,n),a=i.toAuth().sessionClaims.iat<Number.parseInt(r);return!r||a?M(t,"cookie-outdated"):i};async function it(t,e){for(let r of e){let n=await r(t);if(n)return n}return z(t,"unexpected-error")}async function Kt(t,e){let{isSatellite:r,proxyUrl:n}=t,i;return r?i=null:n?i=n:i=s=>s.startsWith("https://clerk.")||s.includes(".clerk.accounts"),nt(e,{...t,issuer:i})}var Mt=t=>{let{clientUat:e,isSatellite:r,hasJustSynced:n=!1}=t;if(r&&(!e||e==="0")&&!n)return M(t,"satellite-needs-syncing")};async function Wt(t){t.frontendApi=t.domain||ie(t.publishableKey)?.frontendApi||t.frontendApi||"",t.apiUrl=t.apiUrl||K,t.apiVersion=t.apiVersion||R;async function e(){try{return await it(t,[qt])}catch(i){return n(i,"header")}}async function r(){try{return await it(t,[Rt,Jt,Mt,vt,Nt,Ct,Ut,Et,zt])}catch(i){return n(i,"cookie")}}function n(i,s){return i instanceof d?(i.tokenCarrier=s,["token-expired","token-not-active-yet"].includes(i.reason)?s==="header"?It(t,i.reason,i.getFullMessage()):M(t,i.reason,i.getFullMessage()):z(t,i.reason,i.getFullMessage())):z(t,"unexpected-error",i.message)}return t.headerToken?e():r()}var Ee=t=>{let{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:l,isSatellite:u,domain:m}=t;return{frontendApi:e,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:l,isSatellite:u,domain:m}};function st(t){let{apiClient:e}=t,{apiKey:r="",secretKey:n="",jwtKey:i="",apiUrl:s=K,apiVersion:a=R,frontendApi:l="",proxyUrl:u="",publishableKey:m="",isSatellite:y=!1,domain:h="",hasJustSynced:b=!1}=t.options;return{authenticateRequest:({apiKey:O,secretKey:I,frontendApi:A,proxyUrl:k,publishableKey:f,jwtKey:c,...W})=>{let{isSatellite:Ue,domain:qe,hasJustSynced:ot}=W;return Wt({...W,apiKey:O||r,secretKey:I||n,apiUrl:s,apiVersion:a,frontendApi:A||l,proxyUrl:k||u,publishableKey:f||m,isSatellite:Ue||y,domain:qe||h,jwtKey:c||i,hasJustSynced:ot||b})},localInterstitial:Je,remotePublicInterstitial:({frontendApi:O,publishableKey:I,proxyUrl:A,isSatellite:k,domain:f,...c})=>kt({...c,apiUrl:s,frontendApi:O||l,publishableKey:I||m,proxyUrl:A||u,isSatellite:k||y,domain:f||h}),remotePrivateInterstitial:()=>e.interstitial.getInterstitial(),remotePublicInterstitialUrl:xe,debugRequestState:Ee}}function Rr(t){let e={...t},r=ne(e),n=st({options:e,apiClient:r});return{...r,...n,__unstable_options:e}}0&&(module.exports={AllowlistIdentifier,AuthStatus,Clerk,Client,DeletedObject,Email,EmailAddress,ExternalAccount,IdentificationLink,Invitation,OauthAccessToken,ObjectType,Organization,OrganizationInvitation,OrganizationMembership,OrganizationMembershipPublicUserData,PhoneNumber,RedirectUrl,SMSMessage,Session,SignInToken,Token,User,Verification,constants,createAuthenticateRequest,debugRequestState,decodeJwt,deserialize,hasValidSignature,loadInterstitialFromLocal,makeAuthObjectSerializable,prunePrivateMetadata,sanitizeAuthObject,signedInAuthObject,signedOutAuthObject,verifyJwt,verifyToken});
//# sourceMappingURL=index.js.map